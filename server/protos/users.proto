syntax = "proto3";

package users.v1;

import "protos/distributed.proto";

option go_package = "github.com/bd878/gallery/server/api";

service Users {
	rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
	rpc FindUser(FindUserRequest) returns (User);
	rpc GetUser(GetUserRequest) returns (User);
	rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse);
	rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse);
	rpc GetServers(GetServersRequest) returns (GetServersResponse) {}
}

message User {
	int64     id               = 1;
	string    login            = 2;
	string    hashed_password  = 3;
	optional bytes metadata    = 5;
}

message GetUserRequest {
	int64     id = 1;
}

message FindUserRequest {
	string login = 1;
}

message CreateUserRequest {
	int64     id      = 1;
	string    login   = 2;
	string    password = 3;
	optional bytes metadata = 4;
}

message CreateUserResponse {
}

message DeleteUserRequest {
	int64   id  = 1;
}

message DeleteUserResponse {}

message UpdateUserRequest {
	int64   id    = 1;
	string  login = 2;
	optional bytes metadata = 3;
}

message UpdateUserResponse {}
